
 ilmid/atmf_uni.c     |    6 ++++--
 lib/sapequal.c       |    2 --
 maint/atmtcp.c       |    2 +-
 maint/enitune.c      |    1 -
 mpoad/p_factory.c    |    3 ++-
 qgen/qlib.c          |    6 +-----
 qgen/qlib.h          |    1 -
 sigd/proto.c         |    2 --
 switch/debug/debug.c |    4 ++--
 switch/tcp/tcpsw.c   |    4 ++--
 10 files changed, 12 insertions(+), 19 deletions(-)

--- linux-atm-2.4.1/src/ilmid/atmf_uni.c.orig	2001-09-03 20:41:06.000000000 +0200
+++ linux-atm-2.4.1/src/ilmid/atmf_uni.c	2005-06-13 11:40:00.000000000 +0200
@@ -187,7 +187,8 @@
       newPrefix->name = alloc_t(AsnOid);
       newPrefix->name->octs = alloc(varBindName->octetLen);
       AsnOidCopy(newPrefix->name, varBindName);
-      Q_INSERT_BEFORE((NetPrefixNode *) var->value, newPrefix, prefix);
+      NetPrefixNode *vv = (NetPrefixNode *)var->value;
+      Q_INSERT_BEFORE(vv, newPrefix, prefix);
       if(atmNetPrefix.octs == NULL)
 	{
 	  atmNetPrefix.octetLen = varBindName->octetLen - NETPREFIX_LEN - 2;
@@ -197,7 +198,8 @@
     }
   else if (varbind->value->a.simple->a.number == INVALID && cmp == AsnOidEqual)
     {
-      Q_REMOVE((NetPrefixNode *) var->value, prefix);
+      NetPrefixNode *vv = (NetPrefixNode *)var->value;
+      Q_REMOVE(vv, prefix);
     }
 
   return NOERROR;
--- linux-atm-2.4.1/src/lib/sapequal.c.orig	2001-09-03 20:41:05.000000000 +0200
+++ linux-atm-2.4.1/src/lib/sapequal.c	2004-08-20 13:24:13.916982104 +0200
@@ -64,7 +64,6 @@
 	    CHECK(l2.itu.mode,1);
 	    CHECK(l2.itu.window,a.l2.itu.window > b.l2.itu.window);
 	    break;
-	default:
     }
     switch (a.l3_proto) {
 	case ATM_L3_X25:
@@ -82,7 +81,6 @@
 	case ATM_L3_USER:
 	    if (a.l3.user != b.l3.user) return 0;
 	    break;
-	default:
     }
     return 1;
 }
--- linux-atm-2.4.1/src/maint/atmtcp.c.orig	2001-09-03 20:41:06.000000000 +0200
+++ linux-atm-2.4.1/src/maint/atmtcp.c	2005-06-12 18:21:44.000000000 +0200
@@ -60,7 +60,7 @@
 static IN *inputs = NULL;
 static fd_set in_set;
 static int fds = 0;
-static int debug = 0;
+int debug = 0;
 static int links = 0;
 
 
--- linux-atm-2.4.1/src/maint/enitune.c.orig	2001-09-03 20:41:06.000000000 +0200
+++ linux-atm-2.4.1/src/maint/enitune.c	2004-08-20 13:27:47.161564000 +0200
@@ -43,7 +43,6 @@
 		mult.rx = strtol(optarg,&end,0);
 		if (*end || mult.rx <= 100) usage(name);
 		break;
-	    default:
 	}
     if (argc != optind+1) usage(name);
     sioc.number = strtol(argv[optind],&end,0);
--- linux-atm-2.4.1/src/mpoad/p_factory.c.orig	2001-09-03 20:41:06.000000000 +0200
+++ linux-atm-2.4.1/src/mpoad/p_factory.c	2005-06-13 11:49:14.000000000 +0200
@@ -31,10 +31,11 @@
             *         beginning at location "addr".
             */
        uint32_t sum = 0;
+       uint16_t* waddr = (uint16_t*)addr;
 
         while( count > 1 )  {
            /*  This is the inner loop */
-               sum += * ((uint16_t *) addr)++;
+               sum += *waddr++;
                count -= 2;
        }
 
--- linux-atm-2.4.1/src/qgen/qlib.c.orig	2001-09-03 20:41:05.000000000 +0200
+++ linux-atm-2.4.1/src/qgen/qlib.c	2005-06-12 18:02:20.000000000 +0200
@@ -6,11 +6,7 @@
 #include <config.h>
 #endif
 
-#ifdef DUMP_MODE
 static int q_dump = 0;
-#else
-int q_dump = 0;
-#endif
 
 #ifndef STANDALONE
 #define DUMP qd_dump
@@ -26,7 +22,7 @@
 #include "op.h"
 
 
-static int debug = 0;
+int debug = 0;
 
 
 void PREFIX(report)(int severity,const char *msg,...)
--- linux-atm-2.4.1/src/qgen/qlib.h.orig	2001-09-03 20:41:05.000000000 +0200
+++ linux-atm-2.4.1/src/qgen/qlib.h	2005-06-12 18:06:07.000000000 +0200
@@ -23,7 +23,6 @@
 #define Q_FATAL		-1
 
 
-extern int q_dump;
 extern void q_report(int severity,const char *msg,...);
 
 #ifdef DUMP_MODE
--- linux-atm-2.4.1/src/sigd/proto.c.orig	2001-09-03 20:41:06.000000000 +0200
+++ linux-atm-2.4.1/src/sigd/proto.c	2004-08-20 13:26:25.705947136 +0200
@@ -258,7 +258,6 @@
 		q_write(&dsc,QF_timer,buf,3);
 		break;
 	    }
-	default:
     }
     va_end(ap);
     if ((size = q_close(&dsc)) >= 0) to_signaling(sock->sig,q_buffer,size);
@@ -287,7 +286,6 @@
 		    q_write(&dsc,QF_ie_id6,&ie,1);
 		}
 		break;
-	    default:
 	}
 	va_end(ap);
     }
--- linux-atm-2.4.1/src/switch/debug/debug.c.orig	2001-09-03 20:41:06.000000000 +0200
+++ linux-atm-2.4.1/src/switch/debug/debug.c	2005-06-13 12:03:43.000000000 +0200
@@ -43,7 +43,7 @@
 
 void fab_init(CALL *call)
 {
-    PRV(call) = alloc_t(FAB);
+    call->fab = alloc_t(FAB);
     PRV(call)->next = calls;
     calls = call;
 }
@@ -59,7 +59,7 @@
 	diag(COMPONENT,DIAG_FATAL,"fab_destroy: call %p not found",call);
     *walk = PRV(call)->next;
     free(PRV(call));
-    PRV(call) = NULL;
+    call->fab = NULL;
 }
 
 
--- linux-atm-2.4.1/src/switch/tcp/tcpsw.c.orig	2001-09-03 20:41:06.000000000 +0200
+++ linux-atm-2.4.1/src/switch/tcp/tcpsw.c	2005-06-13 12:02:58.000000000 +0200
@@ -345,7 +345,7 @@
 
 void fab_init(CALL *call)
 {
-    PRV(call) = alloc_t(FAB);
+    call->fab = alloc_t(FAB);
     PRV(call)->active = 0;
     PRV(call)->next = calls;
     calls = call;
@@ -362,7 +362,7 @@
 	diag(COMPONENT,DIAG_FATAL,"fab_destroy: call %p not found",call);
     *walk = PRV(call)->next;
     free(PRV(call));
-    PRV(call) = NULL;
+    call->fab = NULL;
 }
 
 
